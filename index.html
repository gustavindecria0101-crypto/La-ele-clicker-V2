<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="authModal" class="auth-modal" aria-hidden="true">
    <div class="auth-card">
      <h3 id="authTitle">Entrar / Registrar</h3>

      <div style="display:flex;gap:10px;align-items:center;margin-bottom:8px">
        <div style="font-size:13px;font-weight:800">Avatar</div>
        <div id="avatarChoices" style="display:flex;gap:8px;align-items:center">
          <button class="avatar-choice" data-avatar="/noob.png" title="Noob"><img src="/noob.png" alt="noob" style="width:36px;height:36px;border-radius:8px" /></button>
          <button class="avatar-choice" data-avatar="/OIP (3).webp" title="Man"><img src="/OIP (3).webp" alt="man" style="width:36px;height:36px;border-radius:8px" /></button>
        </div>
        <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
          <!-- New button to save avatar for the currently logged user -->
          <button id="saveAvatarBtn" class="btn" style="padding:6px 8px;font-size:13px;display:none">Salvar Avatar</button>
          <button id="authCloseBtn" class="btn" style="padding:6px 8px;font-size:13px">Fechar</button>
        </div>
      </div>

      <div class="field"><input id="authUsername" placeholder="Username" autocomplete="username" /></div>
      <div class="field"><input id="authPassword" type="password" placeholder="Senha" autocomplete="current-password" /></div>

      <div style="display:flex;align-items:center;gap:8px;margin-top:8px">
        <input id="saveLoginChk" type="checkbox" /> <label for="saveLoginChk" style="font-size:13px;color:var(--muted)">Salvar login (auto-login na pr√≥xima visita)</label>
      </div>

      <div id="authMsg" class="auth-msg" aria-live="polite"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px">
        <button id="authToggle" class="btn">Modo: Login</button>
        <button id="authSubmit" class="btn" style="min-width:86px">Confirmar</button>
      </div>
      <div style="font-size:12px;color:var(--muted);margin-top:8px">Sem email ‚Äî apenas username+senha. Username √∫nico.</div>
    </div>
  </div>

  <div id="scrollWrapper">
  <main id="app">
    <div class="top-row">
      <div class="stats">
        <div class="points" id="points">0</div>
        <div class="sub">l√° ele points</div>
      </div>

      <div class="leaderboard" aria-live="polite">
        <div style="display:flex;gap:8px;align-items:center;margin-bottom:6px">
          <div id="userBadge" style="font-size:12px;color:var(--muted);display:flex;align-items:center;gap:8px;cursor:pointer">
            <img id="userAvatar" src="/noob.png" alt="avatar" style="width:28px;height:28px;border-radius:8px;display:inline-block;object-fit:cover" />
            <span id="userNameShort" style="font-size:12px;color:var(--muted)"></span>
          </div>
          <button id="changeUserBtn" class="btn" style="padding:6px 8px;font-size:12px">Change</button>
        </div>
        <div style="font-size:12px;color:var(--muted);margin-bottom:6px">Top Players</div>
        <div id="leaderList" style="display:flex;flex-direction:column;gap:6px"></div>
      </div>

      <!-- Compact chat widget (replaces the full Server panel) -->
      <div id="chatWidget" style="min-width:220px;max-width:320px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:10px;border-radius:12px;border:1px solid rgba(31,182,255,0.04);box-shadow:var(--glow);">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
          <div style="font-size:12px;font-weight:800">Chat do Servidor</div>
          <div id="currentRoomLabel" style="font-size:11px;color:var(--muted)"></div>
        </div>

        <!-- friend quick actions -->
        <div style="display:flex;flex-direction:column;gap:6px;margin-bottom:8px">
          <div style="display:flex;gap:6px">
            <input id="friendInput" placeholder="Adicionar amigo (username)" style="flex:1;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted)" />
            <button id="addFriendBtn" class="btn" style="padding:8px 10px">Add</button>
          </div>
          <div id="friendList" style="display:flex;gap:8px;flex-wrap:wrap;min-height:28px"></div>
        </div>

        <div id="chatMessages" style="background:rgba(255,255,255,0.01);border-radius:8px;padding:8px;max-height:160px;overflow:auto;font-size:12px;color:var(--muted)"></div>
        <div style="display:flex;gap:6px;margin-top:8px">
          <input id="chatInput" placeholder="Mensagem..." style="flex:1;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted)" />
          <button id="sendChatBtn" class="btn" style="padding:8px 10px">Enviar</button>
        </div>
      </div>

      <div class="prestige" id="prestige">Prestige: 0</div>
    </div>

    <button id="clickerBtn" class="clicker" aria-label="clicker">
      <img id="icon" class="clicker-img" src="/OIP (3).webp" alt="clicker image" draggable="false" />
    </button>

    <div class="bottom-row">
      <div class="panel">
        <h3>Store</h3>
        <div id="store" class="store"></div>
      </div>

      <div class="panel">
        <h3>Badges</h3>
        <div id="badges" class="badges"></div>
      </div>
    </div>

    <div class="pens" aria-hidden="true">
      <span class="pen">üñäÔ∏è</span>
      <span class="pen">üñäÔ∏è</span>
      <span class="pen">üñäÔ∏è</span>
    </div>

    <div class="controls">
      <div class="info">Per click: <span id="perClick">1</span> ¬∑ Per second: <span id="perSec">0</span></div>
      <div class="actions">
        <button id="prestigeBtn" class="btn danger">Prestige</button>
        <button id="resetBtn" class="btn">Reset</button>
        <button id="skinsBtn" class="btn" title="Skins">üñºÔ∏è Skins</button>
        <button id="settingsBtn" class="btn" aria-label="settings" title="Settings">‚öôÔ∏è</button>
      </div>
    </div>
  </main>
  </div>

  <!-- custom scroll controls -->
  <div id="scrollControls" aria-hidden="false">
    <button id="scrollUp" class="scroll-arrow" aria-label="scroll up">‚ñ≤</button>
    <button id="scrollDown" class="scroll-arrow" aria-label="scroll down">‚ñº</button>
  </div>

  <!-- Skins modal -->
  <div id="skinsModal" class="auth-modal" aria-hidden="true">
    <div class="auth-card" style="max-width:420px">
      <h3>Skins do Clicker</h3>
      <div style="display:flex;flex-direction:column;gap:8px;margin-top:8px">
        <div id="skinList" style="display:flex;flex-wrap:wrap;gap:8px"></div>
      </div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button id="saveSkinBtn" class="btn">Salvar</button>
        <button id="skinsClose" class="btn">Fechar</button>
      </div>
      <div style="font-size:12px;color:var(--muted);margin-top:8px">Skins podem dar pequenos boosts por clique; desbloqueie skins com badges, prest√≠gio e marcos.</div>
    </div>
  </div>

  <!-- Settings modal -->
  <div id="settingsModal" class="auth-modal" aria-hidden="true">
    <div class="auth-card" style="max-width:360px">
      <h3>Configura√ß√µes</h3>
      <div style="margin-top:8px">
        <label style="font-size:13px;font-weight:800">Volumes</label>
        <div style="display:flex;flex-direction:column;gap:10px;margin-top:8px">
          <div style="display:flex;align-items:center;gap:8px">
            <div style="width:110px;font-size:13px;color:var(--muted);font-weight:700">M√∫sica</div>
            <input id="musicSlider" type="range" min="0" max="100" step="1" value="12" style="flex:1" />
            <div id="musicLabel" style="width:44px;text-align:center;font-weight:800;color:var(--muted)">12%</div>
          </div>
          <div style="display:flex;align-items:center;gap:8px">
            <div style="width:110px;font-size:13px;color:var(--muted);font-weight:700">Cliques</div>
            <input id="clickSlider" type="range" min="0" max="100" step="1" value="36" style="flex:1" />
            <div id="clickLabel" style="width:44px;text-align:center;font-weight:800;color:var(--muted)">36%</div>
          </div>
          <div style="display:flex;align-items:center;gap:8px">
            <div style="width:110px;font-size:13px;color:var(--muted);font-weight:700">L√° ele</div>
            <input id="laeleSlider" type="range" min="0" max="100" step="1" value="36" style="flex:1" />
            <div id="laeleLabel" style="width:44px;text-align:center;font-weight:800;color:var(--muted)">36%</div>
          </div>
        </div>
      </div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button id="settingsClose" class="btn">Fechar</button>
      </div>
      <div style="font-size:12px;color:var(--muted);margin-top:8px">As configura√ß√µes s√£o salvas localmente.</div>
    </div>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>